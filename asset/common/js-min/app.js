// Copyright 2014 (Davide)
(function(){var g,aa=aa||{},k=this;function ba(){}function l(a){a.c=function(){return a.Jb?a.Jb:a.Jb=new a}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function n(a){return"array"==ca(a)}function da(a){var b=ca(a);return"array"==b||"object"==b&&"number"==typeof a.length}function p(a){return"string"==typeof a}function ea(a){return"function"==ca(a)}function fa(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var ga="closure_uid_"+(1E9*Math.random()>>>0),ha=0;function ia(a,b,c){return a.call.apply(a.bind,arguments)}
function ja(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function q(a,b,c){q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return q.apply(null,arguments)}
function ka(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var la=Date.now||function(){return+new Date};function r(a,b){function c(){}c.prototype=b.prototype;a.M=b.prototype;a.prototype=new c;a.Wc=function(a,c,f){return b.prototype[c].apply(a,Array.prototype.slice.call(arguments,2))}};function s(){0!=ma&&(this[ga]||(this[ga]=++ha))}var ma=0;s.prototype.$b=!1;var na;function oa(a){if(!pa.test(a))return a;-1!=a.indexOf("\x26")&&(a=a.replace(sa,"\x26amp;"));-1!=a.indexOf("\x3c")&&(a=a.replace(ta,"\x26lt;"));-1!=a.indexOf("\x3e")&&(a=a.replace(ua,"\x26gt;"));-1!=a.indexOf('"')&&(a=a.replace(va,"\x26quot;"));-1!=a.indexOf("'")&&(a=a.replace(wa,"\x26#39;"));return a}var sa=/&/g,ta=/</g,ua=/>/g,va=/"/g,wa=/'/g,pa=/[&<>"']/;function xa(a,b){return a<b?-1:a>b?1:0}function ya(a){return String(a).replace(/\-([a-z])/g,function(a,c){return c.toUpperCase()})}
function za(a){var b=p(void 0)?"undefined".replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08"):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var t=Array.prototype,Aa=t.indexOf?function(a,b,c){return t.indexOf.call(a,b,c)}:function(a,b,c){c=null==c?0:0>c?Math.max(0,a.length+c):c;if(p(a))return p(b)&&1==b.length?a.indexOf(b,c):-1;for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Ba=t.forEach?function(a,b,c){t.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=p(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ca=t.filter?function(a,b,c){return t.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=p(a)?
a.split(""):a,m=0;m<d;m++)if(m in h){var L=h[m];b.call(c,L,m,a)&&(e[f++]=L)}return e};function Da(a){var b;a:{b=Ea;for(var c=a.length,d=p(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:p(a)?a.charAt(b):a[b]}function Fa(a,b){return 0<=Aa(a,b)}function Ga(a,b){var c=Aa(a,b),d;(d=0<=c)&&t.splice.call(a,c,1);return d}function Ha(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function Ia(a,b,c,d){t.splice.apply(a,Ja(arguments,1))}function Ja(a,b,c){return 2>=arguments.length?t.slice.call(a,b):t.slice.call(a,b,c)};var Ka;a:{var La=k.navigator;if(La){var Ma=La.userAgent;if(Ma){Ka=Ma;break a}}Ka=""}function u(a){return-1!=Ka.indexOf(a)};var Na;function Oa(){return k.navigator||null}var Pa=u("Opera")||u("OPR"),v=u("Trident")||u("MSIE"),w=u("Gecko")&&!u("WebKit")&&!(u("Trident")||u("MSIE")),x=u("WebKit"),Qa=Oa();Na=-1!=(Qa&&Qa.platform||"").indexOf("Mac");var Ra=!!Oa()&&-1!=(Oa().appVersion||"").indexOf("X11");function Sa(){var a=k.document;return a?a.documentMode:void 0}
var Ta=function(){var a="",b;if(Pa&&k.opera)return a=k.opera.version,ea(a)?a():a;w?b=/rv\:([^\);]+)(\)|;)/:v?b=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:x&&(b=/WebKit\/(\S+)/);b&&(a=(a=b.exec(Ka))?a[1]:"");return v&&(b=Sa(),b>parseFloat(a))?String(b):a}(),Ua={};
function y(a){var b;if(!(b=Ua[a])){b=0;for(var c=String(Ta).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",m=d[f]||"",L=RegExp("(\\d*)(\\D*)","g"),pd=RegExp("(\\d*)(\\D*)","g");do{var qa=L.exec(h)||["","",""],ra=pd.exec(m)||["","",""];if(0==qa[0].length&&0==ra[0].length)break;b=xa(0==qa[1].length?0:parseInt(qa[1],10),0==ra[1].length?0:parseInt(ra[1],10))||xa(0==qa[2].length,
0==ra[2].length)||xa(qa[2],ra[2])}while(0==b)}b=Ua[a]=0<=b}return b}var Va=k.document,Wa=Va&&v?Sa()||("CSS1Compat"==Va.compatMode?parseInt(Ta,10):5):void 0;var Xa=!v||v&&9<=Wa,Ya=v&&!y("9");!x||y("528");w&&y("1.9b")||v&&y("8")||Pa&&y("9.5")||x&&y("528");w&&!y("8")||v&&y("9");function z(a,b){this.type=a;this.currentTarget=this.target=b;this.defaultPrevented=this.$=!1;this.Tb=!0}z.prototype.preventDefault=function(){this.defaultPrevented=!0;this.Tb=!1};function Za(a){Za[" "](a);return a}Za[" "]=ba;function $a(a,b){z.call(this,a?a.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Eb=this.state=null;a&&this.h(a,b)}r($a,z);
$a.prototype.h=function(a,b){var c=this.type=a.type;this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(w){var e;a:{try{Za(d.nodeName);e=!0;break a}catch(f){}e=!1}e||(d=null)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=x||void 0!==a.offsetX?a.offsetX:a.layerX;this.offsetY=x||void 0!==a.offsetY?a.offsetY:a.layerY;this.clientX=void 0!==a.clientX?a.clientX:a.pageX;this.clientY=void 0!==a.clientY?a.clientY:a.pageY;
this.screenX=a.screenX||0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.state=a.state;this.Eb=a;a.defaultPrevented&&this.preventDefault()};
$a.prototype.preventDefault=function(){$a.M.preventDefault.call(this);var a=this.Eb;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Ya)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var ab="closure_listenable_"+(1E6*Math.random()|0);function bb(a){try{return!(!a||!a[ab])}catch(b){return!1}}var cb=0;function db(a,b,c,d,e){this.V=a;this.Na=null;this.src=b;this.type=c;this.za=!!d;this.Ga=e;this.key=++cb;this.aa=this.ya=!1}function eb(a){a.aa=!0;a.V=null;a.Na=null;a.src=null;a.Ga=null};function fb(a,b){for(var c in a)b.call(void 0,a[c],c,a)}function gb(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function hb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function ib(){var a=jb,b;for(b in a)return!1;return!0}var kb="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function lb(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<kb.length;f++)c=kb[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};function A(a){this.src=a;this.k={};this.sa=0}A.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.k[f];a||(a=this.k[f]=[],this.sa++);var h=mb(a,b,d,e);-1<h?(b=a[h],c||(b.ya=!1)):(b=new db(b,this.src,f,!!d,e),b.ya=c,a.push(b));return b};A.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.k))return!1;var e=this.k[a];b=mb(e,b,c,d);return-1<b?(eb(e[b]),t.splice.call(e,b,1),0==e.length&&(delete this.k[a],this.sa--),!0):!1};
function nb(a,b){var c=b.type;if(!(c in a.k))return!1;var d=Ga(a.k[c],b);d&&(eb(b),0==a.k[c].length&&(delete a.k[c],a.sa--));return d}A.prototype.Rb=function(a){a=a&&a.toString();var b=0,c;for(c in this.k)if(!a||c==a){for(var d=this.k[c],e=0;e<d.length;e++)++b,eb(d[e]);delete this.k[c];this.sa--}return b};A.prototype.ia=function(a,b,c,d){a=this.k[a.toString()];var e=-1;a&&(e=mb(a,b,c,d));return-1<e?a[e]:null};
function mb(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.aa&&f.V==b&&f.za==!!c&&f.Ga==d)return e}return-1};var ob="closure_lm_"+(1E6*Math.random()|0),pb={},qb=0;function B(a,b,c,d,e){if(n(b)){for(var f=0;f<b.length;f++)B(a,b[f],c,d,e);return null}c=rb(c);return bb(a)?a.d(b,c,d,e):sb(a,b,c,!1,d,e)}function sb(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=!!e,m=tb(a);m||(a[ob]=m=new A(a));c=m.add(b,c,d,e,f);if(c.Na)return c;d=ub();c.Na=d;d.src=a;d.V=c;a.addEventListener?a.addEventListener(b.toString(),d,h):a.attachEvent(vb(b.toString()),d);qb++;return c}
function ub(){var a=wb,b=Xa?function(c){return a.call(b.src,b.V,c)}:function(c){c=a.call(b.src,b.V,c);if(!c)return c};return b}function xb(a,b,c,d,e){if(n(b)){for(var f=0;f<b.length;f++)xb(a,b[f],c,d,e);return null}c=rb(c);return bb(a)?a.jb(b,c,d,e):sb(a,b,c,!0,d,e)}function yb(a,b,c,d,e){if(n(b))for(var f=0;f<b.length;f++)yb(a,b[f],c,d,e);else c=rb(c),bb(a)?a.ta(b,c,d,e):a&&(a=tb(a))&&(b=a.ia(b,c,!!d,e))&&zb(b)}
function zb(a){if("number"==typeof a||!a||a.aa)return!1;var b=a.src;if(bb(b))return nb(b.R,a);var c=a.type,d=a.Na;b.removeEventListener?b.removeEventListener(c,d,a.za):b.detachEvent&&b.detachEvent(vb(c),d);qb--;(c=tb(b))?(nb(c,a),0==c.sa&&(c.src=null,b[ob]=null)):eb(a);return!0}function vb(a){return a in pb?pb[a]:pb[a]="on"+a}function Ab(a,b,c,d){var e=1;if(a=tb(a))if(b=a.k[b.toString()])for(b=Ha(b),a=0;a<b.length;a++){var f=b[a];f&&f.za==c&&!f.aa&&(e&=!1!==Bb(f,d))}return Boolean(e)}
function Bb(a,b){var c=a.V,d=a.Ga||a.src;a.ya&&zb(a);return c.call(d,b)}
function wb(a,b){if(a.aa)return!0;if(!Xa){var c;if(!(c=b))a:{c=["window","event"];for(var d=k,e;e=c.shift();)if(null!=d[e])d=d[e];else{c=null;break a}c=d}e=c;c=new $a(e,this);d=!0;if(!(0>e.keyCode||void 0!=e.returnValue)){a:{var f=!1;if(0==e.keyCode)try{e.keyCode=-1;break a}catch(h){f=!0}if(f||void 0==e.returnValue)e.returnValue=!0}e=[];for(f=c.currentTarget;f;f=f.parentNode)e.push(f);for(var f=a.type,m=e.length-1;!c.$&&0<=m;m--)c.currentTarget=e[m],d&=Ab(e[m],f,!0,c);for(m=0;!c.$&&m<e.length;m++)c.currentTarget=
e[m],d&=Ab(e[m],f,!1,c)}return d}return Bb(a,new $a(b,this))}function tb(a){a=a[ob];return a instanceof A?a:null}var Cb="__closure_events_fn_"+(1E9*Math.random()>>>0);function rb(a){return ea(a)?a:a[Cb]||(a[Cb]=function(b){return a.handleEvent(b)})};function C(){s.call(this);this.R=new A(this);this.Xb=this}r(C,s);C.prototype[ab]=!0;g=C.prototype;g.mb=null;g.rb=function(a){this.mb=a};g.addEventListener=function(a,b,c,d){B(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){yb(this,a,b,c,d)};
g.dispatchEvent=function(a){var b,c=this.mb;if(c)for(b=[];c;c=c.mb)b.push(c);var c=this.Xb,d=a.type||a;if(p(a))a=new z(a,c);else if(a instanceof z)a.target=a.target||c;else{var e=a;a=new z(d,c);lb(a,e)}var e=!0,f;if(b)for(var h=b.length-1;!a.$&&0<=h;h--)f=a.currentTarget=b[h],e=Db(f,d,!0,a)&&e;a.$||(f=a.currentTarget=c,e=Db(f,d,!0,a)&&e,a.$||(e=Db(f,d,!1,a)&&e));if(b)for(h=0;!a.$&&h<b.length;h++)f=a.currentTarget=b[h],e=Db(f,d,!1,a)&&e;return e};
g.d=function(a,b,c,d){return this.R.add(String(a),b,!1,c,d)};g.jb=function(a,b,c,d){return this.R.add(String(a),b,!0,c,d)};g.ta=function(a,b,c,d){return this.R.remove(String(a),b,c,d)};function Db(a,b,c,d){b=a.R.k[String(b)];if(!b)return!0;b=Ha(b);for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.aa&&h.za==c){var m=h.V,L=h.Ga||h.src;h.ya&&nb(a.R,h);e=!1!==m.call(L,d)&&e}}return e&&!1!=d.Tb}g.ia=function(a,b,c,d){return this.R.ia(String(a),b,c,d)};function D(a,b){C.call(this);this.T=a||1;this.ra=b||k;this.Va=q(this.Sc,this);this.ib=la()}r(D,C);g=D.prototype;g.fa=!1;g.n=null;g.setInterval=function(a){this.T=a;this.n&&this.fa?(this.stop(),this.start()):this.n&&this.stop()};g.Sc=function(){if(this.fa){var a=la()-this.ib;0<a&&a<0.8*this.T?this.n=this.ra.setTimeout(this.Va,this.T-a):(this.n&&(this.ra.clearTimeout(this.n),this.n=null),this.dispatchEvent(E),this.fa&&(this.n=this.ra.setTimeout(this.Va,this.T),this.ib=la()))}};
g.start=function(){this.fa=!0;this.n||(this.n=this.ra.setTimeout(this.Va,this.T),this.ib=la())};g.stop=function(){this.fa=!1;this.n&&(this.ra.clearTimeout(this.n),this.n=null)};var E="tick";function F(a,b,c){if(ea(a))c&&(a=q(a,c));else if(a&&"function"==typeof a.handleEvent)a=q(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<b?-1:k.setTimeout(a,b||0)};function Eb(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);};function Fb(a){if("function"==typeof a.Da)return a.Da();if(p(a))return a.split("");if(da(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return gb(a)}
function Gb(a,b){if("function"==typeof a.forEach)a.forEach(b,void 0);else if(da(a)||p(a))Ba(a,b,void 0);else{var c;if("function"==typeof a.ha)c=a.ha();else if("function"!=typeof a.Da)if(da(a)||p(a)){c=[];for(var d=a.length,e=0;e<d;e++)c.push(e)}else c=hb(a);else c=void 0;for(var d=Fb(a),e=d.length,f=0;f<e;f++)b.call(void 0,d[f],c&&c[f],a)}};function G(a,b){return a+Math.random()*(b-a)}function H(a,b,c){return Math.min(Math.max(a,b),c)};function Hb(a,b){this.I={};this.f=[];this.da=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Hb?(c=a.ha(),d=a.Da()):(c=hb(a),d=gb(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}g=Hb.prototype;g.Da=function(){Ib(this);for(var a=[],b=0;b<this.f.length;b++)a.push(this.I[this.f[b]]);return a};g.ha=function(){Ib(this);return this.f.concat()};
g.remove=function(a){return Object.prototype.hasOwnProperty.call(this.I,a)?(delete this.I[a],this.da--,this.f.length>2*this.da&&Ib(this),!0):!1};function Ib(a){if(a.da!=a.f.length){for(var b=0,c=0;b<a.f.length;){var d=a.f[b];Object.prototype.hasOwnProperty.call(a.I,d)&&(a.f[c++]=d);b++}a.f.length=c}if(a.da!=a.f.length){for(var e={},c=b=0;b<a.f.length;)d=a.f[b],Object.prototype.hasOwnProperty.call(e,d)||(a.f[c++]=d,e[d]=1),b++;a.f.length=c}}
g.get=function(a,b){return Object.prototype.hasOwnProperty.call(this.I,a)?this.I[a]:b};g.set=function(a,b){Object.prototype.hasOwnProperty.call(this.I,a)||(this.da++,this.f.push(a));this.I[a]=b};g.forEach=function(a,b){for(var c=this.ha(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.Bb=function(){return new Hb(this)};function Jb(){}Jb.prototype.Ab=null;function Kb(a){var b;(b=a.Ab)||(b={},Lb(a)&&(b[0]=!0,b[1]=!0),b=a.Ab=b);return b};var Mb;function Nb(){}r(Nb,Jb);function Ob(a){return(a=Lb(a))?new ActiveXObject(a):new XMLHttpRequest}function Lb(a){if(!a.Ib&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.Ib=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.Ib}Mb=new Nb;var Pb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?\x3d[/#?]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#(.*))?$"),Qb=x;function Rb(a,b){if(Qb){Qb=!1;var c=k.location;if(c){var d=c.href;if(d&&(d=(d=Rb(3,d))&&decodeURIComponent(d))&&d!=c.hostname)throw Qb=!0,Error();}}return b.match(Pb)[a]||null};function Sb(a){C.call(this);this.headers=new Hb;this.Ta=a||null;this.W=!1;this.Sa=this.b=null;this.Ja=this.hb="";this.ja=this.cb=this.Ha=this.Za=!1;this.Ra=0;this.Qa=null;this.pb=Tb;this.ub=this.Vc=!1}r(Sb,C);var Tb="",Ub=/^https?$/i,Vb=["POST","PUT"];g=Sb.prototype;
g.send=function(a,b,c,d){if(this.b)throw Error("[goog.net.XhrIo] Object is active with another request\x3d"+this.hb+"; newUri\x3d"+a);b=b?b.toUpperCase():"GET";this.hb=a;this.Ja="";this.Za=!1;this.W=!0;this.b=this.Ta?Ob(this.Ta):Ob(Mb);this.Sa=this.Ta?Kb(this.Ta):Kb(Mb);this.b.onreadystatechange=q(this.Pb,this);try{this.cb=!0,this.b.open(b,String(a),!0),this.cb=!1}catch(e){Wb(this,e);return}a=c||"";var f=this.headers.Bb();d&&Gb(d,function(a,b){f.set(b,a)});d=Da(f.ha());c=k.FormData&&a instanceof k.FormData;
!Fa(Vb,b)||d||c||f.set("Content-Type","application/x-www-form-urlencoded;charset\x3dutf-8");f.forEach(function(a,b){this.b.setRequestHeader(b,a)},this);this.pb&&(this.b.responseType=this.pb);"withCredentials"in this.b&&(this.b.withCredentials=this.Vc);try{Xb(this),0<this.Ra&&((this.ub=Yb(this.b))?(this.b.timeout=this.Ra,this.b.ontimeout=q(this.Vb,this)):this.Qa=F(this.Vb,this.Ra,this)),this.Ha=!0,this.b.send(a),this.Ha=!1}catch(h){Wb(this,h)}};
function Yb(a){return v&&y(9)&&"number"==typeof a.timeout&&void 0!==a.ontimeout}function Ea(a){return"content-type"==a.toLowerCase()}g.Vb=function(){"undefined"!=typeof aa&&this.b&&(this.Ja="Timed out after "+this.Ra+"ms, aborting",this.dispatchEvent("timeout"),this.abort(8))};function Wb(a,b){a.W=!1;a.b&&(a.ja=!0,a.b.abort(),a.ja=!1);a.Ja=b;Zb(a);$b(a)}function Zb(a){a.Za||(a.Za=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}
g.abort=function(){this.b&&this.W&&(this.W=!1,this.ja=!0,this.b.abort(),this.ja=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),$b(this))};g.Pb=function(){this.$b||(this.cb||this.Ha||this.ja?ac(this):this.Kc())};g.Kc=function(){ac(this)};
function ac(a){if(a.W&&"undefined"!=typeof aa&&(!a.Sa[1]||4!=bc(a)||2!=cc(a)))if(a.Ha&&4==bc(a))F(a.Pb,0,a);else if(a.dispatchEvent("readystatechange"),4==bc(a)){a.W=!1;try{var b=cc(a),c,d;a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:d=!0;break a;default:d=!1}if(!(c=d)){var e;if(e=0===b){var f=Rb(1,String(a.hb));if(!f&&self.location)var h=self.location.protocol,f=h.substr(0,h.length-1);e=!Ub.test(f?f.toLowerCase():"")}c=e}if(c)a.dispatchEvent("complete"),a.dispatchEvent("success");
else{var m;try{m=2<bc(a)?a.b.statusText:""}catch(L){m=""}a.Ja=m+" ["+cc(a)+"]";Zb(a)}}finally{$b(a)}}}function $b(a){if(a.b){Xb(a);var b=a.b,c=a.Sa[0]?ba:null;a.b=null;a.Sa=null;a.dispatchEvent("ready");try{b.onreadystatechange=c}catch(d){}}}function Xb(a){a.b&&a.ub&&(a.b.ontimeout=null);"number"==typeof a.Qa&&(k.clearTimeout(a.Qa),a.Qa=null)}g.eb=function(){return!!this.b};function bc(a){return a.b?a.b.readyState:0}function cc(a){try{return 2<bc(a)?a.b.status:-1}catch(b){return-1}}
function dc(a){try{if(!a.b)return null;if("response"in a.b)return a.b.response;switch(a.pb){case Tb:case "text":return a.b.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.b)return a.b.mozResponseArrayBuffer}return null}catch(b){return null}};var ec=!v||v&&9<=Wa,fc=!w&&!v||v&&v&&9<=Wa||w&&y("1.9.1");v&&y("9");function gc(a){a=a.className;return p(a)&&a.match(/\S+/g)||[]}function hc(a,b){for(var c=gc(a),d=Ja(arguments,1),e=c.length+d.length,f=c,h=0;h<d.length;h++)Fa(f,d[h])||f.push(d[h]);a.className=c.join(" ");return c.length==e}function ic(a,b){var c=gc(a),c=jc(c,Ja(arguments,1));a.className=c.join(" ")}function jc(a,b){return Ca(a,function(a){return!Fa(b,a)})}function kc(a,b,c){for(var d=gc(a),e=!1,f=0;f<d.length;f++)d[f]==b&&(Ia(d,f--,1),e=!0);e&&(d.push(c),a.className=d.join(" "))}
function I(a,b){return Fa(gc(a),b)}function J(a,b,c){c?hc(a,b):ic(a,b)};function lc(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}lc.prototype.Bb=function(){return new lc(this.x,this.y)};lc.prototype.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};lc.prototype.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};function K(a){return p(a)?document.getElementById(a):a}function M(a,b){var c=b||document,d=null;return(d=c.querySelectorAll&&c.querySelector?c.querySelector("."+a):mc("*",a,b)[0])||null}
function mc(a,b,c){var d=document;c=c||d;a=a&&"*"!=a?a.toUpperCase():"";if(c.querySelectorAll&&c.querySelector&&(a||b))return c.querySelectorAll(a+(b?"."+b:""));if(b&&c.getElementsByClassName){c=c.getElementsByClassName(b);if(a){for(var d={},e=0,f=0,h;h=c[f];f++)a==h.nodeName&&(d[e++]=h);d.length=e;return d}return c}c=c.getElementsByTagName(a||"*");if(b){d={};for(f=e=0;h=c[f];f++)a=h.className,"function"==typeof a.split&&Fa(a.split(/\s+/),b)&&(d[e++]=h);d.length=e;return d}return c}
function nc(a,b){fb(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in oc?a.setAttribute(oc[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var oc={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function N(a,b,c){var d=arguments,e=document,f=d[0],h=d[1];if(!ec&&h&&(h.name||h.type)){f=["\x3c",f];h.name&&f.push(' name\x3d"',oa(h.name),'"');if(h.type){f.push(' type\x3d"',oa(h.type),'"');var m={};lb(m,h);delete m.type;h=m}f.push("\x3e");f=f.join("")}f=e.createElement(f);h&&(p(h)?f.className=h:n(h)?hc.apply(null,[f].concat(h)):nc(f,h));2<d.length&&pc(e,f,d);return f}
function pc(a,b,c){function d(c){c&&b.appendChild(p(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];if(!da(f)||fa(f)&&0<f.nodeType)d(f);else{var h;a:{if(f&&"number"==typeof f.length){if(fa(f)){h="function"==typeof f.item||"string"==typeof f.item;break a}if(ea(f)){h="function"==typeof f.item;break a}}h=!1}Ba(h?Ha(f):f,d)}}}function qc(a){return fc&&void 0!=a.children?a.children:Ca(a.childNodes,function(a){return 1==a.nodeType})}function rc(a){this.ea=a||k.document||document}g=rc.prototype;
g.a=function(a){return p(a)?this.ea.getElementById(a):a};g.$a=function(a,b){return M(a,b||this.ea)};g.createElement=function(a){return this.ea.createElement(a)};g.createTextNode=function(a){return this.ea.createTextNode(String(a))};g.appendChild=function(a,b){a.appendChild(b)};function sc(a){s.call(this);this.g=a;this.f={}}r(sc,s);var tc=[];g=sc.prototype;g.d=function(a,b,c,d){n(b)||(b&&(tc[0]=b.toString()),b=tc);for(var e=0;e<b.length;e++){var f=B(a,b[e],c||this.handleEvent,d||!1,this.g||this);if(!f)break;this.f[f.key]=f}return this};g.jb=function(a,b,c,d){return uc(this,a,b,c,d)};function uc(a,b,c,d,e,f){if(n(c))for(var h=0;h<c.length;h++)uc(a,b,c[h],d,e,f);else{b=xb(b,c,d||a.handleEvent,e,f||a.g||a);if(!b)return a;a.f[b.key]=b}return a}
g.ta=function(a,b,c,d,e){if(n(b))for(var f=0;f<b.length;f++)this.ta(a,b[f],c,d,e);else c=c||this.handleEvent,e=e||this.g||this,c=rb(c),d=!!d,b=bb(a)?a.ia(b,c,d,e):a?(a=tb(a))?a.ia(b,c,d,e):null:null,b&&(zb(b),delete this.f[b.key]);return this};g.Rb=function(){fb(this.f,zb);this.f={}};g.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function O(a,b){p(b)?vc(a,void 0,b):fb(b,ka(vc,a))}function vc(a,b,c){var d;a:if(d=ya(c),void 0===a.style[d]&&(c=(x?"Webkit":w?"Moz":v?"ms":Pa?"O":null)+za(c),void 0!==a.style[c])){d=c;break a}d&&(a.style[d]=b)}function wc(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a};function xc(){}l(xc);xc.prototype.Jc=0;function P(a){C.call(this);this.Ba=a||na||(na=new rc)}r(P,C);g=P.prototype;g.Ec=xc.c();g.G=null;g.ka=!1;g.P=null;g.nb=null;g.Xa=null;g.Wa=null;g.a=function(){return this.P};g.$a=function(a){return this.P?this.Ba.$a(a,this.P):null};function Q(a){a.Ea||(a.Ea=new sc(a));return a.Ea}g.rb=function(a){if(this.nb&&this.nb!=a)throw Error("Method not supported");P.M.rb.call(this,a)};
function yc(a,b){if(a.ka)throw Error("Component already rendered");if(b){var c=9==b.nodeType?b:b.ownerDocument||b.document;a.Ba&&a.Ba.ea==c||(a.Ba=b?new rc(9==b.nodeType?b:b.ownerDocument||b.document):na||(na=new rc));a.O(b);a.Q()}else throw Error("Invalid element to decorate");}g.O=function(a){this.P=a};g.Q=function(){this.ka=!0;zc(this,function(a){!a.ka&&a.a()&&a.Q()})};function Ac(a){zc(a,function(a){a.ka&&Ac(a)});a.Ea&&a.Ea.Rb();a.ka=!1}function zc(a,b){a.Xa&&Ba(a.Xa,b,void 0)}
g.removeChild=function(a,b){if(a){var c=p(a)?a:a.G||(a.G=":"+(a.Ec.Jc++).toString(36)),d;this.Wa&&c?(d=this.Wa,d=(c in d?d[c]:void 0)||null):d=null;a=d;if(c&&a){d=this.Wa;c in d&&delete d[c];Ga(this.Xa,a);b&&(Ac(a),a.P&&(c=a.P)&&c.parentNode&&c.parentNode.removeChild(c));c=a;if(null==c)throw Error("Unable to set parent component");c.nb=null;P.M.rb.call(c,null)}}if(!a)throw Error("Child is not in parent component");return a};var R,S,Bc,Cc,Dc,T,Ec,Fc;function Gc(){P.call(this);this.B=null;this.pa=R.registry;this.Ca=this.Nb=this.Qb=null}r(Gc,P);
Gc.prototype.h=function(){this.B=N("div","",[N("div","deko-pug"),N("div","module life x3",[N("div","hearts")]),N("div","module points"),N("div","module level"),N("div","module boost",[N("div","bar-wrapper",[N("div","bar empty")])]),N("div","module action-msg"),N("div","game-handlers",[N("div","game-state pause")])]);var a=M("boost",this.B);this.pa.addElement(a,"boost-cmp");this.Qb=M("points",this.B);this.Nb=M("level",this.B);this.pa.addElement(this.B,"stat-display");Hc(this);this.pa.addElement(this.Qb,
"point-count-el");this.pa.addElement(this.Nb,"level-count-el");R.StatDisplay=this;a=this.pa.a("stat-display")[0];a=M("game-handlers",a);this.Ca=M("game-state",a);Q(this).d(this.Ca,"click",this.nc);a=U.c();Q(this).d(a,[Ic,Jc,V,Kc],this.Ac)};function Hc(a){M("playground").appendChild(a.B);F(function(){J(this.B,"visible",!0)},0,a)}
Gc.prototype.Ac=function(a){if("pause"==a.type||"stopgame"==a.type)J(this.B,"visible",!1),kc(this.Ca,"pause","continue");else if("continue"==a.type||"playagain"==a.type)J(this.B,"visible",!0),kc(this.Ca,"continue","pause")};Gc.prototype.nc=function(){var a=R.gameStateController;T?a.sb():a.qb()};function U(){C.call(this)}r(U,C);l(U);function Lc(){P.call(this);this.yb=new D(S.environment.clouds.updateTrigger);this.F=[];this.Hc=Math.round(G(S.environment.clouds.amount.min,S.environment.clouds.amount.max));this.Gc=S.environment.clouds.classCount;this.ma=0;this.g=U.c()}r(Lc,P);g=Lc.prototype;g.O=function(a){Lc.M.O.call(this,a);this.Sb();B(this.g,Kc,this.bb,!1,this);B(this.g,V,this.Sb,!1,this)};g.Q=function(){Lc.M.Q.call(this);Q(this).d(this.yb,E,this.Tc)};
g.Tc=function(){for(var a=0;a<this.F.length;a++){var b=this.F[a],c=-M("playground").offsetWidth,d=b.offsetWidth+b.offsetLeft+M("playground").offsetWidth;O(b,{left:H(G(c,d),0,M("playground").offsetWidth-b.offsetWidth)+"px"})}};
g.Sb=function(){var a="left "+(S.environment.clouds.updateTrigger+1E3)/1E3+"s linear";if(0>=this.F.length)for(var b=1;b<=this.Hc;b++){var c=Math.round(G(1,this.Gc)),c=N("div","cloud c"+c);this.a().appendChild(c);O(c,{"-webkit-transition":a,"-moz-transition":a,"-o-transition":a,"-ms-transition":a,"transition:":a,left:this.ma+"px",top:c.offsetTop+G(-c.offsetHeight,c.offsetHeight)+"px"});this.ma=this.ma+c.offsetWidth-Math.round(G(50,c.offsetWidth/2));this.ma+c.offsetWidth+40>=M("playground").offsetWidth&&
(this.ma=c.offsetWidth-Math.round(G(50,150)));this.F.push(c)}else for(b=0;b<this.F.length;b++)J(this.F[b],"inactive",!1)};g.bb=function(){this.yb.stop();for(var a=0;a<this.F.length;a++)J(this.F[a],"inactive",!0)};function Mc(a,b,c){z.call(this,a);this.Ic=b;this.Mb=c||!1}r(Mc,z);function W(){P.call(this);this.Ub=null;this.Pa=0;this.tb=new D(5);this.S=U.c()}r(W,P);l(W);W.prototype.h=function(){var a=R.registry.a("stat-display")[0];this.P=M("action-msg",a);this.Ub=M("playground");Q(this).d(W.c(),"setmsg",this.bc);Q(this).d(this.tb,E,this.yc);Q(this).d(this.S,V,this.Zb)};W.prototype.bc=function(a){var b=a.Ic;this.a().innerHTML="\x3cspan\x3e"+b+"\x3cspan\x3e";J(this.a(),"warning",a.Mb);a.Mb&&this.tb.start()};W.prototype.Zb=function(){this.a().innerHTML=""};
W.prototype.yc=function(){var a;a=this.Pa%2?"2px, -2px":"-2px, 2px";30<=this.Pa&&(this.tb.stop(),this.Pa=0,a="0px, 0px");O(this.Ub,{"-webkit-transform":"translate("+a+")"});this.Pa++};function Nc(a){z.call(this,a)}r(Nc,z);var Ic="pause",Jc="continue",Kc="stopgame",V="playagain";function Oc(){this.register={elements:[]}}l(Oc);Oc.prototype.addElement=function(a,b){b||(b="");hc(a,b);this.register.elements.push(a)};Oc.prototype.a=function(a){for(var b=[],c=0;c<this.register.elements.length;c++)I(this.register.elements[c],a)&&b.push(this.register.elements[c]);return b};function Pc(){this.b=new Sb;this.ab=!1}l(Pc);function Qc(a,b,c){a.ab=!0;!0==a.ab&&Bc==S.highscore.accessKey&&c>=S.highscore.pointsNeed&&a.b.send("/index.php?hs\x3dtrue\x26username\x3d"+Cc+"\x26level\x3d"+b+"\x26points\x3d"+c);B(a.b,"complete",function(){this.ab=!1;Bc=""},!1,a)};function Rc(){P.call(this);this.Ya=this.Z=null}r(Rc,P);Rc.prototype.h=function(){this.Z=K("layer");this.Ya=M("content",this.Z);var a=M("close",this.Z);Q(this).d(a,"click",function(){Sc(this,!1)})};function Tc(a,b,c){c?J(a.Z,c,!0):a.Z.className="";c=new Sb;c.send(Dc+"app/views/"+b+".php");Sc(a,!0);Q(a).d(c,"success",a.jc)}Rc.prototype.jc=function(a){var b;a=a.target;try{b=a.b?a.b.responseText:""}catch(c){b=""}this.Ya.innerHTML=b;this.dispatchEvent(Uc)};
function Sc(a,b){J(a.Z,"active",b);if(b){var c=N("div","loading-circle");a.Ya.appendChild(c)}}var Uc="ready";function Vc(a,b){z.call(this,a);this.Uc=b||[]}r(Vc,z);function Wc(){P.call(this);this.r=[];this.ga=null}r(Wc,P);Wc.prototype.O=function(a){Wc.M.O.call(this,a);this.ga=this.$a("error");this.ga||(this.ga=N("div","error"),a.appendChild(this.ga));a=mc("input","",a);a[0].focus();for(var b=0;b<a.length;b++)this.r[a[b].id||a[b].name||a[b].type]={id:a[b].id,el:a[b],type:a[b].type,value:a[b].value}};Wc.prototype.Q=function(){Wc.M.Q.call(this);Q(this).d(this.a(),"submit",this.Bc)};
Wc.prototype.Bc=function(a){a.preventDefault();for(var b in this.r)this.r[b].value=this.r[b].el.value;a:{for(var c in this.r)switch(this.r[c].type){case "text":if(""==this.r[c].el.value)Xc(this,"Please enter a username");else if(4>this.r[c].el.value.length)Xc(this,"You have to enter at least 4 signs");else if(20<this.r[c].el.value.length)Xc(this,"Username too big!");else{Xc(this,"");a=!0;break a}}a=!1}a&&this.dispatchEvent(new Vc("ready",this.r))};function Xc(a,b){a.ga.innerHTML="\x26raquo; "+b};function Yc(){P.call(this);this.s=null;this.H=new Rc}r(Yc,P);function Zc(a){a.s=K("menu");J(a.s,"inactive",!1);a.H.h()}function $c(a,b,c,d){for(var e=qc(b),f=0;f<e.length;f++)Q(a).d(e[f],"click",c);a=K("menu");a.innerHTML="";d&&(d=N("h2","",d),a.appendChild(d));a.appendChild(b)}function ad(a){J(a.s,"inactive",!0)}g=Yc.prototype;
g.Fa=function(a){switch(a.target.innerHTML){case "Start":Tc(this.H,"name","dynamic");Q(this).jb(this.H,Uc,this.tc);break;case "Highscores":this.Gb(a);break;case "How to play":Tc(this.H,"howto");break;case "Credits":Tc(this.H,"credits")}};g.tc=function(){var a=K("username-injection"),b=new Wc;yc(b,a);Q(this).d(b,"ready",this.sc)};g.sc=function(a){Cc=a.Uc.username.value;Sc(this.H,!1);ad(this);this.dispatchEvent(bd)};
g.wc=function(a){switch(a.target.innerHTML){case "Continue":this.dispatchEvent(cd);break;case "How to play":this.Fa(a)}};g.Gb=function(a){switch(a.target.innerHTML){case "Play again":this.dispatchEvent(dd);break;case "How to play":this.Fa(a);break;case "Highscores":Tc(this.H,"highscores");Q(this).d(this.H,Uc,this.oc);break;case "Credits":this.Fa(a)}};
g.oc=function(){var a=K("highscore-list"),b=new Sb;b.send(Dc+"?hsload\x3dtrue");Q(this).d(b,"complete",function(b){b=dc(b.target);a.innerHTML=""!=b?b:"No highscore entrys found."})};var bd="mainStart",cd="pauseContinue",dd="lostRestart";function ed(){this.g=U.c();this.s=new Yc}l(ed);g=ed.prototype;g.h=function(){B(this.s,cd,this.qb,!1,this);B(this.s,dd,this.Hb,!1,this);B(this.g,"gameover",this.lc,!1,this);B(this.g,V,this.Hb,!1,this);B(window,"blur",this.sb,!1,this)};g.sb=function(){if(T&&!Ec){T=!1;Fc=!0;fd(!0);this.g.dispatchEvent(new Nc(Ic));var a=this.s;Zc(a);var b=N("div","submenu main",[N("div","button","Continue"),N("div","button","How to play")]);$c(a,b,a.wc,"Pause")}};
g.qb=function(){T||Ec||(T=!0,Fc=!1,fd(!1),this.g.dispatchEvent(new Nc(Jc)),ad(this.s))};
g.lc=function(){if(!Ec){T=!1;Ec=!0;fd(!0);this.g.dispatchEvent(new Nc(Kc));var a=this.s;Zc(a);var b=N("div","submenu main",[N("div","button","Play again"),N("div","button","Highscores"),N("div","button","How to play"),N("div","button","Credits")]),c=R.pointController,d=c.t.toString(),c=c.U.toString(),d=N("div","user-info",[N("div","username",Cc),N("div","points","with "+d+" points"),N("div","level","reached lvl. "+c)]);$c(a,b,a.Gb,"Game over");K("menu").appendChild(d);a=gd.c();b=Pc.c();Bc="73j\x26)1!\u00df\u00df34";
Qc(b,a.U,a.t)}};g.Hb=function(){Ec&&(T=!0,Ec=!1,fd(!1),this.g.dispatchEvent(new Nc(V)),ad(this.s))};function hd(){C.call(this);this.la=!0;this.Oa=this.Ka=!1;X={};this.dc=R.gameStateController}var X;r(hd,C);l(hd);hd.prototype.h=function(){B(window,["keyup","keydown"],this.rc,!1,this);X={walk:!1,boost:!1,jump:!1}};function fd(a){var b=R.keyController;b.la=a;Fc&&(b.dispatchEvent("stopwalkleft"),b.dispatchEvent("stopwalkright"))}
hd.prototype.rc=function(a){switch(a.keyCode){case 37:if("keydown"==a.type){if(this.la)break;this.Ka||(this.Ka=!0,this.dispatchEvent("walkleft"),X.walk=!0)}else"keyup"==a.type&&this.Ka&&(this.Ka=!1,this.dispatchEvent("stopwalkleft"),X.walk=!1);break;case 39:if("keydown"==a.type){if(this.la)break;this.Oa||(this.Oa=!0,this.dispatchEvent("walkright"),X.walk=!0)}else"keyup"==a.type&&this.Oa&&(this.Oa=!1,this.dispatchEvent("stopwalkright"),X.walk=!1);break;case 32:if(this.la)break;"keyup"==a.type&&this.dispatchEvent("jump");
break;case 66:if(this.la)break;"keydown"==a.type&&(this.dispatchEvent("boost"),X.boost=!0);break;case 27:case 80:"keyup"==a.type&&(a=this.dc,T?a.sb():a.qb())}};function id(){C.call(this);this.o=jd;this.Db=this.startTime=null}r(id,C);var jd=0;id.prototype.q=function(a){this.dispatchEvent(a)};function kd(a,b,c){s.call(this);this.Ob=a;this.T=b||0;this.g=c;this.Yb=q(this.ac,this)}r(kd,s);g=kd.prototype;g.G=0;g.start=function(a){this.stop();this.G=F(this.Yb,void 0!==a?a:this.T)};g.stop=function(){this.eb()&&k.clearTimeout(this.G);this.G=0};g.eb=function(){return 0!=this.G};g.ac=function(){this.G=0;this.Ob&&this.Ob.call(this.g)};var jb={},ld=null;function md(a){a=a[ga]||(a[ga]=++ha);delete jb[a];ib()&&ld&&ld.stop()}function nd(){ld||(ld=new kd(function(){od()},20));var a=ld;a.eb()||a.start()}function od(){var a=la();fb(jb,function(b){qd(b,a)});ib()||nd()};function rd(a,b,c,d){id.call(this);if(!n(a)||!n(b))throw Error("Start and end parameters must be arrays");if(a.length!=b.length)throw Error("Start and end points must be the same length");this.qa=a;this.cc=b;this.duration=c;this.xb=d;this.coords=[]}r(rd,id);g=rd.prototype;g.m=0;
g.play=function(a){if(a||this.o==jd)this.m=0,this.coords=this.qa;else if(1==this.o)return!1;md(this);this.startTime=a=la();-1==this.o&&(this.startTime-=this.duration*this.m);this.Db=this.startTime+this.duration;this.m||this.q("begin");this.q("play");-1==this.o&&this.q("resume");this.o=1;var b=this[ga]||(this[ga]=++ha);b in jb||(jb[b]=this);nd();qd(this,a);return!0};g.stop=function(a){md(this);this.o=jd;a&&(this.m=1);sd(this,this.m);this.q("stop");this.q("end")};
g.pause=function(){1==this.o&&(md(this),this.o=-1,this.q("pause"))};function qd(a,b){a.m=(b-a.startTime)/(a.Db-a.startTime);1<=a.m&&(a.m=1);sd(a,a.m);1==a.m?(a.o=jd,md(a),a.q("finish"),a.q("end")):1==a.o&&a.q("animate")}function sd(a,b){ea(a.xb)&&(b=a.xb(b));a.coords=Array(a.qa.length);for(var c=0;c<a.qa.length;c++)a.coords[c]=(a.cc[c]-a.qa[c])*b+a.qa[c]}g.q=function(a){this.dispatchEvent(new td(a,this))};
function td(a,b){z.call(this,a);this.coords=b.coords;this.x=b.coords[0];this.y=b.coords[1];this.z=b.coords[2];this.duration=b.duration;this.m=b.m;this.state=b.o}r(td,z);function ud(){P.call(this);this.lb=new D(10);this.gb=new D(10);this.ca=new D(S.pug.walkAnimationMs);this.wb=[];this.oa="";this.L=S.pug.moveSpeed;this.Ia=S.pug.jumpSpeed;this.kb=S.pug.maxJumpHeight;this.A={};this.X={};this.fb=!1;this.i={};this.j={};this.N=null;this.va=this.wa=!1;this.D=new rd([0,1],[0,105],S.module.boost.reloadingDelay);this.Ua=new D(10);this.xa=0;this.S=U.c();this.K=vd.c()}r(ud,P);l(ud);g=ud.prototype;
g.O=function(a){ud.M.O.call(this,a);var b=R.registry.a("game-section")[0];this.i.left=a.offsetLeft;this.j.bottom=b.offsetHeight-(a.offsetTop+a.offsetHeight);this.A={min:0,max:b.offsetWidth-a.offsetWidth};this.X={min:this.j.bottom,max:b.offsetHeight-a.offsetHeight};this.wb=[0,-62,-124,-185];a=R.registry.a("boost-cmp")[0];this.N=M("bar",a)};
g.Q=function(){Q(this).d(this.lb,E,this.vc);Q(this).d(this.gb,E,this.pc);Q(this).d(this.ca,E,this.Cc);Q(this).d(this.D,"animate",this.gc);Q(this).d(this.D,"end",this.fc);Q(this).d(this.Ua,E,this.hc);Q(this).d(this.S,[Ic,Jc,Kc,V],this.mc);Q(this).d(this.S,Kc,this.Dc);B(this.S,V,this.Pc,!1,this)};g.Dc=function(){J(this.a(),"inactive",!0)};g.Pc=function(){J(this.a(),"inactive",!1)};
g.vc=function(){"left"==this.oa?this.i.left-=this.L:"right"==this.oa&&(this.i.left+=this.L);this.i.left=H(this.i.left,this.A.min,this.A.max);this.i.left<=this.A.min||this.i.left>=this.A.max?(J(this.a(),"walking",!1),this.ca.stop()):(J(this.a(),"walking",!0),this.ca.start());O(this.a(),{left:this.i.left+"px"})};function wd(a,b){a.oa=b;a.lb.start();"right"==b?J(a.a(),"right",!0):J(a.a(),"right",!1)}g.stop=function(){this.lb.stop();this.ca.stop();J(this.a(),"walking",!1)};
g.Fc=function(){this.fb||(xd(this.K,"jump"),this.gb.start(),J(this.a(),"jumping",!0),this.fb=!0)};g.zb=function(){this.wa||this.va?this.wa||!this.va||I(this.a(),"jumping")||(this.stop(),xd(this.K,"boost"),fd(!0),this.Ua.start(),yd(this)):yd(this)};
g.hc=function(){"left"==this.oa?this.i.left-=this.L*S.module.boost.speedIncicator:"right"==this.oa&&(this.i.left+=this.L*S.module.boost.speedIncicator);this.j.bottom=this.xa<S.module.boost.maxCount/2?this.j.bottom+S.module.boost.pixelY:this.j.bottom-S.module.boost.pixelY;this.i.left=H(this.i.left,this.A.min,this.A.max);O(this.a(),{left:this.i.left+"px",bottom:this.j.bottom+"px"});this.xa++;if(this.xa>=S.module.boost.maxCount||this.i.left==this.A.max||this.i.left==this.A.min)this.Ua.stop(),this.xa=
0,O(this.a(),{bottom:this.X.min+"px"}),ud.c().dispatchEvent(zd),fd(!1)};g.gc=function(a){a=Number(H(a.y,1,100).toFixed(2));80<a&&(J(this.N,"loading",!1),J(this.N,"loaded",!0));O(this.N,{width:a+"%"})};g.fc=function(){this.wa=!1;this.va=!0;J(this.N,"loading",!1);W.c().dispatchEvent(new Mc("setmsg","Boost loaded"))};function yd(a){a.D.play();a.wa=!0;a.va=!1;J(a.N,"loading",!0);J(a.N,"empty",!1)}
g.mc=function(a){switch(a.type){case "pause":this.D.pause();break;case "continue":this.D.play();break;case "stopgame":this.D.stop();break;case "playagain":this.L=S.pug.moveSpeed,this.D.duration=S.module.boost.reloadingDelay,this.ca.setInterval(S.pug.walkAnimationMs),this.kb=S.pug.maxJumpHeight,this.Ia=S.pug.jumpSpeed,yd(this)}};g.Cc=function(){this.vb=this.wb[this.vb+1]?this.vb+1:0;O(this.a(),{"background-position":"0 "+this.wb[this.vb]+"px"})};
g.pc=function(){this.j.bottom<=this.kb&&!I(this.a(),"jumping-down")?this.j.bottom+=this.Ia:(this.j.bottom-=1.5*this.Ia,J(this.a(),"jumping-down",!0));this.j.bottom=H(this.j.bottom,this.X.min,this.X.max);O(this.a(),{bottom:this.j.bottom+"px"});this.j.bottom<=this.X.min&&(this.gb.stop(),J(this.a(),"jumping",!1),J(this.a(),"jumping-down",!1),this.j.bottom=this.X.min,this.fb=!1)};var zd="stopboost";function Y(){this.u=null;this.l=new ud}l(Y);Y.prototype.h=function(){this.u=N("div","pug-player",[N("div","mouth")]);var a=R.registry.a("game-section")[0];R.registry.addElement(this.u);a.appendChild(this.u);Ad(this);yc(this.l,this.u);this.l.zb()};
function Ad(a){B(R.keyController,"walkleft",function(){wd(this.l,"left")},!1,a);B(R.keyController,"walkright",function(){wd(this.l,"right")},!1,a);B(R.keyController,"stopwalkleft",function(){Bd(this,"left")},!1,a);B(R.keyController,"stopwalkright",function(){Bd(this,"right")},!1,a);B(R.keyController,"jump",a.qc,!1,a);B(R.keyController,"boost",a.ic,!1,a);B(ud.c(),zd,a.ec,!1,a)}function Bd(a,b){(I(a.u,"right")&&"right"==b||!I(a.u,"right")&&"left"==b)&&a.l.stop()}Y.prototype.qc=function(){this.l.Fc()};
Y.prototype.ic=function(){this.l.zb()};Y.prototype.ec=function(){X.boost=!1;X.walk?I(this.u,"right")?wd(this.l,"right"):I(this.u,"right")||wd(this.l,"left"):I(this.u,"right")?Bd(this,"right"):I(this.u,"right")||Bd(this,"left")};Y.prototype.newMoveSpeed=function(a,b){var c=Number(a),d=!1;b&&"true"==b&&(d=!0);var e=this.l;e.L=d?e.L+c:c;console.log(c,e.L,d)};Y.prototype.newBoostLoaderDelay=function(a){this.l.D.duration=Number(a)};Y.prototype.newWalkAnimationMs=function(a){this.l.ca.setInterval(Number(a))};
Y.prototype.newMaxJumpHeight=function(a){this.l.kb=Number(a)};Y.prototype.newJumpSpeed=function(a){this.l.Ia=Number(a)};function Cd(){P.call(this);this.Cb=0;this.C=this.e=null;this.Lb=this.Kb=!1;this.ua={active:!1}}r(Cd,P);
Cd.prototype.Fb=function(a){var b=R.registry.a("pug-player")[0],c=M("mouth",b),d=b.offsetTop,e=b.offsetTop+c.offsetHeight,f=I(b,"right")?b.offsetLeft+b.offsetWidth-c.offsetWidth:b.offsetLeft,b=I(b,"right")?b.offsetLeft+b.offsetWidth:b.offsetLeft+c.offsetWidth,c=this.e.offsetTop+this.e.offsetHeight/2,h=this.e.offsetLeft+this.e.offsetWidth/2;c>d&&c<e&&h>f&&h<b?(this.Kb=!0,J(this.e,"eaten",!0),this.Aa()):(d=R.registry.a("game-section")[0],d=this.e.offsetLeft>d.offsetWidth||0>this.e.offsetLeft+this.e.offsetWidth?
this.Lb=!0:!1,d?this.Aa():(O(this.e,{top:Number(a.y.toFixed(0))+"px"}),this.ua.active&&(this.Cb="ltr"==this.ua.direction?this.e.offsetLeft+this.ua.pixel:this.e.offsetLeft-this.ua.pixel,O(this.e,{left:this.Cb+"px"}))))};Cd.prototype.Aa=function(){Q(this).ta(this.C,"animate",this.Fb);Q(this).ta(this.C,"end",this.Aa);this.Lb?M("rain-wrapper").removeChild(this.e):this.Kb?this.dispatchEvent(Dd):this.dispatchEvent(Ed)};var Ed="missed",Dd="eaten";function Fd(a,b){z.call(this,a);this.t=b}r(Fd,z);function Z(){C.call(this);this.v=[];this.w={};this.Qc=S.rain.spawnInterval;this.Y=this.p=this.ba=null;this.J=0;this.g=U.c();this.K=vd.c();this.ob=!1;this.Wb={active:!1}}r(Z,C);l(Z);g=Z.prototype;
g.h=function(){this.w={xS:0,xE:R.registry.a("game-section")[0].offsetWidth,yS:0,yE:R.registry.a("game-section")[0].offsetHeight};this.p=N("div","rain-wrapper");R.registry.a("game-section")[0].appendChild(this.p);R.registry.addElement(this.p);this.ba=new D(this.Qc);B(this.ba,E,this.zc,!1,this);var a=U.c();B(a,Ic,this.stop,!1,this);B(a,Jc,this.start,!1,this);B(a,Kc,this.bb,!1,this);B(a,V,this.Oc,!1,this)};g.start=function(){this.ba.start();for(var a=0;a<this.v.length;a++)this.v[a].C.play()};
g.Oc=function(){this.start();this.ba.setInterval(S.rain.spawnInterval);this.J=0;var a=R.registry.a("stat-display")[0],a=M("life",a);kc(a,"x0","x3")};g.stop=function(){this.ba.stop();for(var a=0;a<this.v.length;a++)this.v[a].C.pause()};g.bb=function(){this.stop();this.v=[];for(var a=this.p,b;b=a.firstChild;)a.removeChild(b)};
g.zc=function(){var a=0;this.Y?this.Y.e.offsetLeft<this.w.xE/2?a=Number(this.Y.e.offsetLeft+this.w.xE/3*Math.random()):this.Y.e.offsetLeft>this.w.xE/2&&(a=Number(this.Y.e.offsetLeft-this.w.xE/3*Math.random())):a=Number((Math.random()*this.w.xE).toFixed(0));var b=Number(this.w.yE+S.rain.defaultSize),a=H(a,this.w.xS,this.w.xE-S.rain.defaultSize),a=new lc(a,b),b=new Cd,c=this.ob,d=this.Wb,e=N("div","drop "+S.rain.dropClasses[Math.floor(Math.random()*S.rain.dropClasses.length)]),f=a.x,h,m=w&&(Na||Ra)&&
y("1.9");f instanceof lc?(h=f.x,f=f.y):(h=f,f=-50);e.style.left=wc(h,m);e.style.top=wc(f,m);R.registry.a("rain-wrapper")[0].appendChild(e);b.e=e;b.ua=d;d=S.rain.initialFallSpeed;e=Math.round(G(S.rain.initialFallSpeed/2,S.rain.initialFallSpeed));b.C=new rd([a.x,-50],[0,a.y],c?e:d);Q(b).d(b.C,"animate",b.Fb);Q(b).d(b.C,"end",b.Aa);b.C.play();this.Y=b;this.v.push(b);xb(b,Ed,this.uc,!1,this);xb(b,Dd,this.kc,!1,this)};
g.uc=function(a){3>this.J&&(this.J+=1);xd(this.K,"lost-drop");W.c().dispatchEvent(new Mc("setmsg","Lost life! "+H(3-this.J,0,3)+" left",!0));var b=R.registry.a("stat-display")[0],b=M("life",b);kc(b,"x"+Number(3-this.J+1),"x"+Number(3-this.J));this.v.splice(this.v.indexOf(a.target),1);3<=this.J?this.g.dispatchEvent(new Nc("gameover")):F(function(){a.target.e&&this.p.removeChild(a.target.e)},200,this)};
g.kc=function(a){this.dispatchEvent(new Fd("add",a.target.e.offsetWidth));this.v.splice(this.v.indexOf(a.target),0);F(function(){this.p.removeChild(a.target.e)},0,this)};Z.prototype.newSpawnInterval=function(a){this.ba.setInterval(parseInt(a,10))};Z.prototype.newDropFallspeed=function(a){S.rain.initialFallSpeed=parseInt(a,10)};Z.prototype.randomizeFallspeed=function(a){this.ob=!0;"false"==a&&(this.ob=!1)};
Z.prototype.windSimulation=function(a,b,c){this.Wb="true"==a?{active:!0,direction:b,pixel:parseInt(c,10)}:{active:!1}};function gd(){C.call(this);this.Ma={};this.La=this.U=this.na=this.t=0;this.g=U.c();this.K=vd.c()}r(gd,C);l(gd);gd.prototype.h=function(a){a.push(this);this.Ma={points:R.registry.a("point-count-el")[0],level:R.registry.a("level-count-el")[0]};this.La=S.levels[0][0];for(var b=0;b<a.length;b++)B(a[b],"add",this.xc,!1,this);this.dispatchEvent(new Fd("add","0"));Gd(this,!1);B(this.g,V,this.Nc,!1,this)};gd.prototype.Nc=function(){this.t=0;this.Ma.points.innerHTML=this.t;this.U=0;Gd(this,!1);Hd(this)};
gd.prototype.xc=function(a){this.t+=Number(a.t);this.na+=Number(a.t);this.Ma.points.innerHTML=this.t;Hd(this)};
function Hd(a){for(var b=S.levels,c=!1,d=0;d<b.length;d++)if(b[d][1]==a.U+1&&(c=!0,"^"!=b[d][0]&&(a.La=b[d][0]),a.na>=a.La)){if(b[d][2])for(b=b[d][2].split(";"),d=0;d<b.length;d++)if(b[d]=b[d].replace(/\s+/g,""),""!=b[d])for(var e=b[d].split("[")[0],f=b[d].split("[")[1].replace("]","").split("/"),h=0;h<f.length;h++)if(""!=f[h]){var m=f[h].split("(")[0],L=f[h].split("(")[1].replace(")","").split(",");"function"==ca(R[e][m])&&R[e][m].apply(R[e],L)}Gd(a,!0);break}c||a.na>=a.La&&Gd(a,!0)}
function Gd(a,b){a.na=0;a.U+=1;a.Ma.level.innerHTML=a.U;xd(a.K,"lvlup");b&&W.c().dispatchEvent(new Mc("setmsg","Level up!"))};function Id(){C.call(this);R={};Ec=Fc=T=!1}r(Id,C);Id.prototype.start=function(){R.registry=Oc.c();R.registry.addElement(K("game"),"game-section");R.statDisplay=new Gc;R.statDisplay.h();R.actionMsg=W.c();R.actionMsg.h();R.gameStateController=ed.c();R.gameStateController.h();R.keyController=hd.c();R.keyController.h();R.pugController=Y.c();R.pugController.h();R.rainController=Z.c();R.rainController.h();R.pointController=gd.c();R.pointController.h([R.rainController]);F(this.Lc,100,this)};
Id.prototype.Lc=function(){R.rainController.start();fd(!1);var a=N("div","cloud-wrapper");M("environment").appendChild(a);yc(new Lc,a);T=!0};function vd(){this.K=[];this.p=null}l(vd);vd.prototype.h=function(){var a=["boost","jump","lost-drop","lvlup"];this.p=N("div","sound-wrapper");for(var b=0;b<a.length;b++){var c=N("audio","audio-for-"+a[b]),d=N("source");d.src="/asset/common/sounds/"+a[b]+".wav";d.type="audio/wav";c.appendChild(d);this.p.appendChild(c);this.K.push(c)}K("game").appendChild(this.p)};function xd(a,b){M("audio-for-"+b,a.p)};function Jd(){Cc="unnamed";Dc=window.location.pathname;Bc="";this.S=U.c();Kd(this,!0)}function Kd(a,b){var c=new Sb;c.send(Dc+"app/layout/jsonConfig.php");xb(c,"success",function(a){a=a.target;S=a.b?Eb(a.b.responseText):void 0;if(b){vd.c().h();a=new Yc;Zc(a);var c=N("div","submenu main",[N("div","button","Start"),N("div","button","How to play"),N("div","button","Highscores"),N("div","button","Credits")]);$c(a,c,a.Fa,"Bitpug");B(a,bd,this.Rc,!1,this)}},!1,a);xb(a.S,V,a.Mc,!1,a)}
Jd.prototype.Mc=function(){Kd(this,!1)};Jd.prototype.Rc=function(){(new Id).start()};function Ld(){new Jd}var Md=["bp","Initialize"],$=k;Md[0]in $||!$.execScript||$.execScript("var "+Md[0]);for(var Nd;Md.length&&(Nd=Md.shift());)Md.length||void 0===Ld?$=$[Nd]?$[Nd]:$[Nd]={}:$[Nd]=Ld;})();